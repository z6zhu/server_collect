<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">   
  <link rel="stylesheet" href="https://cdn.bootcss.com/foundation/5.5.3/css/foundation.min.css">
  <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="https://cdn.bootcss.com/foundation/5.5.3/js/vendor/modernizr.js"></script>
  <link rel="stylesheet" href="http://static.runoob.com/assets/foundation-icons/foundation-icons.css">

<style type="text/css">
th,td{

height:40px;

}
</style>
</head>
<body>
<div id="query_zone" style="position:absolute;left:0%;top:0%;width:100%;height:15%;">
	<div  style="position:absolute;left:1%;top:40%;width:7%;height:20%;text-align:center;line-height:20%;font-size:100%;"><strong>服务器</strong></div>
	<select  id="online_offline" name="online_offline"  style="position:absolute;left:8%;top:20%;width:4%;height:40%;">
				<option value ="{{zero_b}}" selected="selected">{{zero_b}}</option> 
				 <option value ="all">all</option>
 				 <option value ="online">online</option>
 			 	 <option value ="offline" >offline</option>
	</select>
  <!--  	<input  id="online_offline"  type="text" value="{{zero_b}}" style="position:absolute;left:8%;top:20%;width:8%;height:40%;"/>    -->
  	
  	<div style="position:absolute;left:12.5%;top:40%;width:6%;height:20%;text-align:center;line-height:20%;font-size:100%;"> <strong> 时区</strong> </div>
  	<input  id="time_name"  type="datetime-local" value="{{first_b}}" style="position:absolute;left:18.5%;top:20%;width:19%;height:40%;"/>
  	<input  id="time_name_right"  type="datetime-local" value="{{first_b_right}}" style="position:absolute;left:37.5%;top:20%;width:19%;height:40%;"/>
  	
  	<div  style="position:absolute;left:56%;top:40%;width:7%;height:40%;text-align:center;line-height:20%;font-size:100%;"> <strong>实施人</strong> </div>
  	<select   id="update_people" name="update_people"  style="position:absolute;left:63%;top:20%;width:4%;height:40%;">
  			     <option value ="{{third_b}}" selected = "selected">{{third_b}}</option>
  			     <option value ="all">all</option>
 				 <option value ="LX">LX</option>
 			 	 <option value ="ZZ">ZZ</option>
 			 	 <option value ="WK">WK</option> 	 
	</select>
  <!--  <input  id="update_people"  type="text" value="{{third_b}}" style="position:absolute;left:54%;top:20%;width:8%;height:40%;"/>  -->	
  	
  	<div  style="position:absolute;left:66%;top:40%;width:7%;height:40%;text-align:center;font-size:100%;line-height:20%;"> <strong> 模块名 </strong> </div>
   <input  id="module_name"  type="text"  value="{{second_b}}" style="position:absolute;left:72%;top:20%;width:8%;height:40%;"/>
  	
  	<button id="query_go" type="button" style="position:absolute;left:81%;top:20%;width:8%;height:40%;font-size:30%;line-height:20%;">查询</button>
 	<button id="add_buttom" data-reveal-id="myModal" type="button"  style="position:absolute;left:90%;top:20%;width:8%;height:40%;font-size:30%;line-height:20%;">添加</button>
 	
 <div id="myModal" class="reveal-modal" data-reveal >
 	<form  action="{% url 'test_fresh'  %}" method="POST">
 	 	线上测试选择: <select  name="online_offline" >
 				 <option value ="online">online</option>
 			 	 <option value ="offline">offline</option>
				</select>
		 实施人: <select  name="update_people" >
 				 <option value ="LX">LX</option>
 			 	 <option value ="ZZ">ZZ</option>
 			 	 <option value ="WK">WK</option>
				</select>
		更新模块: <input  type="text" name="module" value="test_web" >
		系统类型: <select  name="sys_class" >
 				 <option value ="linux">linux</option>
 			 	 <option value ="windows">windows</option>
				</select>
		服务器名称: <input  type="text" name="server" value="10.16.25.1" >
		<!-- 跟新时间: <input type="datetime-local" name="update_time" value="20170101-0101">   -->
		更新内容: <textarea  rows="5" cols="20" name="except_info">
			</textarea>
		<button type="submit" class="button round">提交</button>
		<button type="reset" class="button round">重置</button>
	</form>
  </div>
</div>
<div id="show_zone" style="position:absolute;left:0%;top:15%;width:100%;height:70%;overflow-y:auto;">
	
  <table style="position:absolute;left:5%;width:90%;padding:1px;table-layout:fixed;">
  <thead>
    <tr>
      <th width="10%">线上或测试</th>
      <th width="10%">项目实施人</th>
      <th width="10%">服务器 名称</th>
      <th width="10%">更新模块</th>
      <th width="10%">系统类型</th>
      <th width="10%">更新时间</th>
      <th width="30%">新内容</th>
      <th width="10%">更>用户操作</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>
<div id="page_zone" style="position:absolute;left:30%;top:85%;width:30%;height:15%;border:3px;">
	<ul class="pagination" style="margin:0px; padding:0px;">
 		<li class="arrow"><a href="{% url 'test_fresh'  %}/?page={{prev_pager}}&time_name_right={{first_b_right}}&time_name={{first_b}}&module_name={{second_b}}&update_people={{third_b}}&online_offline={{zero_b}}">«</a></li>
 		 <li ><a href="{% url 'test_fresh'  %}/?page=1&time_name={{first_b}}&time_name_right={{first_b_right}}&module_name={{second_b}}&update_people={{third_b}}&online_offline={{zero_b}}">1</a></li>
 		 <li><a href="{% url 'test_fresh'  %}/?page=2&time_name={{first_b}}&time_name_right={{first_b_right}}&module_name={{second_b}}&update_people={{third_b}}&online_offline={{zero_b}}">2</a></li>
  		<li><a href="{% url 'test_fresh'  %}/?page=3&time_name={{first_b}}&time_name_right={{first_b_right}}&module_name={{second_b}}&update_people={{third_b}}&online_offline={{zero_b}}">3</a></li>
  		<li><a href="{% url 'test_fresh'  %}/?page=4&time_name={{first_b}}&time_name_right={{first_b_right}}&module_name={{second_b}}&update_people={{third_b}}&online_offline={{zero_b}}">4</a></li>
 		 <li><a href="{% url 'test_fresh'  %}?page=5&time_name={{first_b}}&time_name_right={{first_b_right}}&module_name={{second_b}}&update_people={{third_b}}&online_offline={{zero_b}}">5</a></li>
		<li class="arrow"><a href="{% url 'test_fresh'  %}/?page={{next_pager}}&time_name_right={{first_b_right}}&time_name={{first_b}}&module_name={{second_b}}&update_people={{third_b}}&online_offline={{zero_b}}">»</a></li>
	</ul>
	<div style="position:absolute;top:0%;left:62%;width:35%;height:20%;">第<input id="input_button" type="text" value="{{page}}" style="width:20%;height:20%;display:inline">页  </div>
	<div id="button_go" style="position:absolute;top:0%;left:79%;width:7%;text-aligh:center;height:25%;background-color: #4CAF50;border-radius:5px;border: 1px solid green;">Go</div>
	<div style="position:absolute;top:0%;left:87%;width:15%;height:20%;">共{{num_pages}}页</div>
</div>
<div style="position:absolute;left:80%;top:85%;width:5%;height:5%;border:3px;">
	
	<div style="position:absolute;left:0%;"><i class="fi-download"></i></div>
</div>
 <!--       ===============================================================       -->	
 <div id="myModal_edit" class="reveal-modal" data-reveal>
 	<form  action="{% url 'test_fresh'  %}" method="POST">
 		更新id: <input  type="text" name="update_id"  value="0"  >
 		线上测试选择: <select  name="online_offline" >
 				 <option value ="online">online</option>
 			 	 <option value ="offline">offline</option>
				</select>
		 更新用户: <select  name="update_people">
 				 <option value ="LX">LX</option>
 			 	 <option value ="ZZ">ZZ</option>
 			 	 <option value ="WK">WK</option>
				</select>
		更新模块: <input  type="text" name="module" value="test_web">
		系统类型: <select  name="sys_class" >
 				 <option value ="linux">linux</option>
 			 	 <option value ="windows">windows</option>
				</select>
		服务器名称: <input  type="text" name="server" value="10.16.25.1" >
		跟新时间: <input type="datetime-local" name="update_time" value="20170101-0101">
		更新内容: <textarea  rows="5" cols="20" name="except_info">
			</textarea>
		<button type="submit" class="button round">更新</button>
		<button type="reset" class="button round">重置</button>
	</form>
  </div>
</div>
 <script type="text/javascript">
 $(document).ready(function() {
	    $(document).foundation();                        
	})
//-------------------------------------------	
$("#query_go").click(function(){
	//online_offline=$("#online_offline").val();
	online_offline=$("#online_offline").val();
	time_name=$("#time_name").val();
	time_name_right=$("#time_name_right").val();
		
	module_name=$("#module_name").val();
	update_people=$("#update_people").val();
	
	location.href="{% url 'test_fresh'  %}?time_name="+time_name.toString()+"&online_offline="+online_offline.toString()+"&time_name_right="+time_name_right.toString()+"&module_name="+module_name.toString()+"&update_people="+update_people.toString();
})
//---------------------filter ----------------------------
{% for info_go in info %}
  click_str="<a id=\"{{info_go.id}}\""+" "+"href="+"\"#\""+" "+"data-reveal-id="+"myModal_edit" +">edit</a>" 
//  console.log(click_str);
  delete_str="<a href="+"{% url 'test_fresh'  %}/?pk_id={{info_go.id}}"+">delete</a>" 
  
  $("table tbody").append("<tr>"+"<td>"+"{{info_go.online_offline}}"+"</td>"+"<td>"+"{{info_go.update_people}}"+"</td>"+"<td>"+"{{info_go.server}}"+"</td>"+"<td>"+"{{info_go.module}}"+"</td>"+"<td>"+"{{info_go.sys_variety}}"+"</td>"+"<td>"+"{{info_go.update_time}}"+"</td>"+"<td >"+"{{info_go.except_info}}"+"</td>"+"<td>"+click_str+"&nbsp&nbsp"+delete_str+"</td>"+"</tr>");

  $("#{{info_go.id}}").click(function(){
	  
	 	$("#myModal_edit input[name='update_id']").val("{{info_go.id}}"); 
	  	$("#myModal_edit select[name='online_offline']").val("{{info_go.online_offline}}"); 
		$("#myModal_edit select[name='update_people']").val("{{info_go.update_people}}");
		$("#myModal_edit input[name='module']").val("{{info_go.module}}"); 
		$("#myModal_edit select[name='sys_class']").val("{{info_go.sys_variety}}"); 
		$("#myModal_edit input[name='server']").val("{{info_go.server}}"); 
		$("#myModal_edit input[name='update_time']").val("{{info_go.update_time}}"); 
		
		var show_except_info="{{info_go.except_info}}".replace(/&gt;/g,">").replace(/&lt;/g,"<")
	
		$("#myModal_edit textarea[name='except_info']").val(show_except_info); 
	})
{% endfor %}	
//-------------------------------------------
$("#input_button").focus(function(){
	input_button=$("#input_button").val("").toString();
		}).blur(function(){
			input_button=$("#input_button").val().toString();
			})		
$("#button_go").click(function(){
	online_offline=$("#online_offline").val();
	time_name=$("#time_name").val();
	time_name_right=$("#time_name_right").val();
		
	module_name=$("#module_name").val();
	update_people=$("#update_people").val();
	
	input_button=$("#input_button").val();
	test="{% url 'test_fresh'  %}?page="+input_button.toString()+"&time_name="+time_name.toString()+"&online_offline="+online_offline.toString()+"&time_name_right="+time_name_right.toString()+"&module_name="+module_name.toString()+"&update_people="+update_people.toString();
	
	location.href="{% url 'test_fresh'  %}?page="+input_button.toString()+"&time_name="+time_name.toString()+"&online_offline="+online_offline.toString()+"&time_name_right="+time_name_right.toString()+"&module_name="+module_name.toString()+"&update_people="+update_people.toString();
	
});
$(".fi-download").click(function(){
	
	online_offline=$("#online_offline").val();
	time_name=$("#time_name").val();
	time_name_right=$("#time_name_right").val();
		
	module_name=$("#module_name").val();
	update_people=$("#update_people").val();
	
	input_button=$("#input_button").val();
	
	location.href="{% url 'test_fresh'  %}?download="+"yes"+"&time_name="+time_name.toString()+"&online_offline="+online_offline.toString()+"&time_name_right="+time_name_right.toString()+"&module_name="+module_name.toString()+"&update_people="+update_people.toString();

	
});
</script>
</body>
</html>